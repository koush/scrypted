(()=>{"use strict";var __webpack_modules__={636:(module,__webpack_exports__,__webpack_require__)=>{function startPeriodicGarbageCollection(){if(__webpack_require__.g.gc)try{const e=__webpack_require__.g;if(e.gc)return setInterval((()=>{e.gc()}),1e4)}catch(e){}else console.warn("rpc peer garbage collection not available: global.gc is not exposed.")}__webpack_require__.d(__webpack_exports__,{uD:()=>RpcPeer}),module=__webpack_require__.hmd(module);class RpcProxy{peer;entry;constructorName;proxyProps;proxyOneWayMethods;constructor(e,t,r,i,o){this.peer=e,this.entry=t,this.constructorName=r,this.proxyProps=i,this.proxyOneWayMethods=o}toPrimitive(){const e=this.peer;return`RpcProxy-${e.selfName}:${e.peerName}: ${this.constructorName}`}get(e,t,r){if(t===RpcPeer.PROPERTY_PROXY_ID)return this.entry.id;if("__proxy_constructor"===t)return this.constructorName;if("__proxy_peer"===t)return this.peer;if(t===RpcPeer.PROPERTY_PROXY_PROPERTIES)return this.proxyProps;if(t===RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS)return this.proxyOneWayMethods;if(t===RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION||t===RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN)return;if("then"===t)return;if("constructor"===t)return;if(void 0!==this.proxyProps?.[t])return this.proxyProps?.[t];return RpcPeer.handleFunctionInvocations(this,e,t,r)||new Proxy((()=>t),this)}set(e,t,r,i){return t===RpcPeer.finalizerIdSymbol&&(this.entry.finalizerId=r),!0}apply(e,t,r){if(Object.isFrozen(this.peer.pendingResults))return Promise.reject(new RPCResultError(this.peer,"RpcPeer has been killed"));const i=e()||null,o=[],n={};for(const e of r||[])o.push(this.peer.serialize(e,n));const s={type:"apply",id:void 0,proxyId:this.entry.id,args:o,method:i};return this.proxyOneWayMethods?.includes?.(i)?(s.oneway=!0,this.peer.send(s,void 0,n),Promise.resolve()):this.peer.createPendingResult(((e,t)=>{s.id=e,this.peer.send(s,t,n)}))}}class RPCResultError extends Error{cause;constructor(e,t,r,i){super(`${e.selfName}:${e.peerName}: ${t}`),this.cause=r,i?.name&&(this.name=i?.name),i?.stack&&(this.stack=`${e.peerName}:${e.selfName}\n${r?.stack||i.stack}`)}}function compileFunction(code,params,options){params=params||[];const f=`(function(${params.join(",")}) {;${code};})`;return eval(f)}try{const e=FinalizationRegistry}catch(e){window.WeakRef=class{target;constructor(e){this.target=e}deref(){return this.target}},window.FinalizationRegistry=class{register(){}}}class RpcPeer{selfName;peerName;send;idCounter=1;params={};pendingResults={};proxyCounter=1;localProxied=new Map;localProxyMap={};remoteWeakProxies={};finalizers=new FinalizationRegistry((e=>this.finalize(e)));nameDeserializerMap=new Map;constructorSerializerMap=new Map;transportSafeArgumentTypes=RpcPeer.getDefaultTransportSafeArgumentTypes();killed;killedDeferred;static finalizerIdSymbol=Symbol("rpcFinalizerId");static isRpcProxy(e){return!!e?.[RpcPeer.PROPERTY_PROXY_ID]}static getDefaultTransportSafeArgumentTypes(){const e=new Set;return e.add(Number.name),e.add(String.name),e.add(Object.name),e.add(Boolean.name),e.add(Array.name),e}static handleFunctionInvocations(e,t,r,i){return"apply"===r?(r,i)=>e.apply(t,e,i):"call"===r?(r,...i)=>e.apply(t,e,i):"toString"===r||r===Symbol.toPrimitive?(t,...r)=>e.toPrimitive():void 0}static PROPERTY_PROXY_ID="__proxy_id";static PROPERTY_PROXY_ONEWAY_METHODS="__proxy_oneway_methods";static PROPERTY_JSON_DISABLE_SERIALIZATION="__json_disable_serialization";static PROPERTY_PROXY_PROPERTIES="__proxy_props";static PROPERTY_JSON_COPY_SERIALIZE_CHILDREN="__json_copy_serialize_children";static PROBED_PROPERTIES=new Set(["then","constructor","__proxy_id","__proxy_constructor","__proxy_peer",RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS,RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION,RpcPeer.PROPERTY_PROXY_PROPERTIES,RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN]);constructor(e,t,r){this.selfName=e,this.peerName=t,this.send=r,this.killed=new Promise(((e,t)=>{this.killedDeferred={resolve:e,reject:t}}))}createPendingResult(e){if(Object.isFrozen(this.pendingResults))return Promise.reject(new RPCResultError(this,"RpcPeer has been killed"));const t=new Promise(((t,r)=>{const i=(this.idCounter++).toString();this.pendingResults[i]={resolve:t,reject:r},e(i,(e=>r(new RPCResultError(this,e.message,e))))}));return t.catch((()=>{})),t}kill(e){const t=new RPCResultError(this,e||"peer was killed");this.killedDeferred.reject(t);for(const e of Object.values(this.pendingResults))e.reject(t);this.pendingResults=Object.freeze({}),this.params=Object.freeze({}),this.remoteWeakProxies=Object.freeze({}),this.localProxyMap=Object.freeze({}),this.localProxied.clear()}addSerializer(e,t,r){this.nameDeserializerMap.set(t,r),this.constructorSerializerMap.set(e,t)}finalize(e){delete this.remoteWeakProxies[e.id];const t={__local_proxy_id:e.id,__local_proxy_finalizer_id:e.finalizerId,type:"finalize"};this.send(t)}async getParam(e){return this.createPendingResult(((t,r)=>{const i={id:t,type:"param",param:e};this.send(i,r)}))}evalLocal(e,t,r){const i=Object.assign({},this.params,r);let o;try{o=module.require("vm").compileFunction}catch(e){o=compileFunction}return o(e,Object.keys(i),{filename:t})(...Object.values(i))}createErrorResult(e,t){e.stack=t.stack||"no stack",e.result=t.name||"no name",e.message=t.message||"no message"}deserialize(e,t){if(!e)return e;if(e[RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN]){const r={};for(const[i,o]of Object.entries(e))r[i]=this.deserialize(o,t);return r}const{__remote_proxy_id:r,__remote_proxy_finalizer_id:i,__local_proxy_id:o,__remote_constructor_name:n,__serialized_value:s,__remote_proxy_props:a,__remote_proxy_oneway_methods:c}=e;if(r){let e=this.remoteWeakProxies[r]?.deref();return e||(e=this.newProxy(r,n,a,c)),e[RpcPeer.finalizerIdSymbol]=i,e}if(o){const e=this.localProxyMap[o];if(!e)throw new RPCResultError(this,`invalid local proxy id ${o}`);return e}const _=this.nameDeserializerMap.get(n);return _?_.deserialize(s,t):e}serialize(e,t){if(!0===e?.[RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN]){const r={};for(const[i,o]of Object.entries(e))r[i]=this.serialize(o,t);return r}if(!e||!e[RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION]&&this.transportSafeArgumentTypes.has(e.constructor?.name))return e;let r=e.__proxy_constructor||e.constructor?.name?.toString(),i=this.localProxied.get(e);if(i){const t=(this.proxyCounter++).toString();return i.finalizerId=t,{__remote_proxy_id:i.id,__remote_proxy_finalizer_id:t,__remote_constructor_name:r,__remote_proxy_props:e?.[RpcPeer.PROPERTY_PROXY_PROPERTIES],__remote_proxy_oneway_methods:e?.[RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS]}}const{__proxy_id:o,__proxy_peer:n}=e;if(o&&n===this)return{__local_proxy_id:o};const s=this.constructorSerializerMap.get(e.constructor);if(s){r=s;const i=this.nameDeserializerMap.get(s);if(!i)throw new Error("serializer not found for "+s);const o=i.serialize(e,t);return{__remote_proxy_id:void 0,__remote_proxy_finalizer_id:void 0,__remote_constructor_name:r,__remote_proxy_props:e?.[RpcPeer.PROPERTY_PROXY_PROPERTIES],__remote_proxy_oneway_methods:e?.[RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS],__serialized_value:o}}const a=(this.proxyCounter++).toString();return i={id:a,finalizerId:a},this.localProxied.set(e,i),this.localProxyMap[a]=e,{__remote_proxy_id:a,__remote_proxy_finalizer_id:a,__remote_constructor_name:r,__remote_proxy_props:e?.[RpcPeer.PROPERTY_PROXY_PROPERTIES],__remote_proxy_oneway_methods:e?.[RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS]}}newProxy(e,t,r,i){const o={id:e,finalizerId:void 0},n=new RpcProxy(this,o,t,r,i),s=new Proxy("Function"===t||"AsyncFunction"===t?function(){}:n,n),a=new WeakRef(s);return this.remoteWeakProxies[e]=a,this.finalizers.register(n,o),s}async handleMessage(e,t){try{switch(e.type){case"param":{const t=e,r={},i={type:"result",id:t.id,result:this.serialize(this.params[t.param],r)};this.send(i,void 0,r);break}case"apply":{const r=e,i={type:"result",id:r.id||""},o={};try{const e=this.localProxyMap[r.proxyId];if(!e)throw new Error(`proxy id ${r.proxyId} not found`);const n=[];for(const e of r.args||[])n.push(this.deserialize(e,t));let s;if(r.method){if(!e[r.method])throw new Error(`target ${e?.constructor?.name} does not have method ${r.method}`);s=await e[r.method](...n)}else s=await e(...n);i.result=this.serialize(s,o)}catch(e){this.createErrorResult(i,e)}r.oneway||this.send(i,void 0,o);break}case"result":{const r=e,i=this.pendingResults[r.id];if(delete this.pendingResults[r.id],!i)throw new Error(`unknown result ${r.id}`);if(r.message||r.stack){const e=new RPCResultError(this,r.message||"no message",void 0,{name:r.result,stack:r.stack});return void i.reject(e)}i.resolve(this.deserialize(r.result,t));break}case"finalize":{const t=e,r=this.localProxyMap[t.__local_proxy_id];if(r){const e=this.localProxied.get(r);if(t.__local_proxy_finalizer_id&&t.__local_proxy_finalizer_id!==e?.finalizerId)break;delete this.localProxyMap[t.__local_proxy_id],this.localProxied.delete(r)}break}default:throw new Error(`unknown rpc message type ${e.type}`)}}catch(e){return void console.error("unhandled rpc error",this.peerName,e)}}}function getEvalSource(){return`\n    (() => {\n        ${RpcProxy}\n\n        ${RpcPeer}\n    \n        return {\n            RpcPeer,\n            RpcProxy,\n        };\n    })();\n    `}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{var e=__webpack_require__(636);class t{finished=!1;resolve;reject;promise=new Promise(((e,t)=>{this.resolve=t=>{this.finished=!0,e(t)},this.reject=e=>{this.finished=!0,t(e)}}))}function r(){try{return navigator.userAgent}catch(e){}}function i(e){return new Promise((t=>{e.addEventListener("iceconnectionstatechange",(()=>{o(e)&&t(e.iceConnectionState)}))}))}function o(e){return"disconnected"===e.iceConnectionState||"failed"===e.iceConnectionState||"closed"===e.iceConnectionState}class n{pc;pcDeferred=new t;dcDeferred=new t;microphone;micEnabled=!1;onPeerConnection;options={userAgent:r(),capabilities:{audio:RTCRtpReceiver.getCapabilities?.("audio")||{codecs:void 0,headerExtensions:void 0},video:RTCRtpReceiver.getCapabilities?.("video")||{codecs:void 0,headerExtensions:void 0}},screen:{width:screen.width,height:screen.height}};constructor(){}async getOptions(){return this.options}async setMicrophone(e){if(this.microphone&&e&&!this.micEnabled){this.micEnabled=!0;const e=await navigator.mediaDevices.getUserMedia({video:!1,audio:!0});await this.microphone.replaceTrack(e.getTracks()[0])}this.microphone.track.enabled=e}close(){this.pcDeferred.promise.then((e=>{for(const t of e.getTransceivers()||[])try{t.sender?.track?.stop?.()}catch(e){}e.close()})).catch((()=>{})),this.pcDeferred.reject(new Error("iceConnectionState "+this.pc?.iceConnectionState))}async createPeerConnection(e){if(this.pc)return;const t=this.pc=new RTCPeerConnection(e.configuration);if(this.pcDeferred.resolve(t),await(this.onPeerConnection?.(t)),t.addEventListener("iceconnectionstatechange",(()=>{console.log("iceConnectionState",t.iceConnectionState),console.log("connectionState",t.connectionState),o(t)&&this.close()})),e.datachannel){const r=t.createDataChannel(e.datachannel.label,e.datachannel.dict);r.binaryType="arraybuffer",this.dcDeferred.resolve(r)}if(e.audio){const r=t.addTransceiver("audio",e.audio);"sendrecv"!==e.audio.direction&&"sendonly"!==e.audio.direction||(this.microphone=r.sender)}if(e.video)if("sendrecv"===e.video.direction||"sendonly"===e.video.direction)try{const e=await navigator.mediaDevices.getUserMedia({video:!0});for(const r of e.getTracks())t.addTrack(r)}catch(e){}else t.addTransceiver("video",e.video)}async createLocalDescription(e,t,r){await this.createPeerConnection(t);const i=new Promise((e=>{this.pc.onicecandidate=t=>{t.candidate?r?.(JSON.parse(JSON.stringify(t.candidate))):e(void 0)},this.pc.onicegatheringstatechange=()=>{"complete"===this.pc.iceGatheringState&&e(void 0)}})),o=e=>({type:e.type,sdp:e.sdp});if("offer"===e){let e=await this.pc.createOffer({offerToReceiveAudio:!!t.audio,offerToReceiveVideo:!!t.video});const n=this.pc.setLocalDescription(e);return r||(await n,await i,e=await this.pc.createOffer({offerToReceiveAudio:!!t.audio,offerToReceiveVideo:!!t.video})),o(e)}{let e=await this.pc.createAnswer();const t=this.pc.setLocalDescription(e);return r||(await t,await i,e=this.pc.currentLocalDescription||e),o(e)}}async setRemoteDescription(e,t){await this.createPeerConnection(t),await this.pc.setRemoteDescription(e)}async addIceCandidate(e){await this.pc.addIceCandidate(e)}async endSession(){}}document.addEventListener("DOMContentLoaded",(function(t){const r=new cast.framework.CastReceiverOptions;r.disableIdleTimeout=!0,cast.framework.CastReceiverContext.getInstance().start(r);const o=cast.framework.CastReceiverContext.getInstance().getPlayerManager(),s=document.getElementById("media");let a;o.setMessageInterceptor(cast.framework.messages.MessageType.LOAD,(t=>{console.log(t);const r=t.media.entity||t.media.contentId,o=t.credentials??t.media.customData.token,c=new URL(r),_=c.pathname,d={};for(const[e,t]of new URLSearchParams(c.search))d[e]=t;const p={path:_,query:d},l=eio(`wss://${c.host}`,p);return l.on("open",(async()=>{l.send(JSON.stringify({token:o}));const t=new e.uD("cast-receiver","host",((e,t)=>{try{l.send(JSON.stringify(e))}catch(e){t?.(e)}}));l.on("message",(e=>{t.handleMessage(JSON.parse(e))}));const r=new n,c=()=>{console.log("cleanup"),l.close(),r.pcDeferred.promise.then((e=>e.close()))};a?.(),a=c,l.on("close",(()=>{console.log("socket io connection close event"),c()})),r.onPeerConnection=async e=>{i(e).then(c);const t=new MediaStream(e.getReceivers().map((e=>e.track)));e.ontrack=e=>t.addTrack(e.track),s.srcObject=t,function(e){return new Promise(((t,r)=>{"connected"!==e.iceConnectionState?(e.addEventListener("iceconnectionstatechange",(()=>{"connected"===e.iceConnectionState&&t(void 0)})),i(e).then((e=>r(new Error(e))))):t(void 0)}))}(e).then((()=>{l.removeAllListeners()}))},t.params.session=r})),null}))}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU1DLEVBQWMsSUFBSUMsWUFBWXJILEVBQUdzSCxlQUFlQyxLQUFLalMsR0FBYUEsRUFBU29NLFNBQ2pGMUIsRUFBR3dILFFBQVVuVCxHQUFLK1MsRUFBWXJFLFNBQVMxTyxFQUFFcU4sT0FDekNWLEVBQU15RyxVQUFZTCxFRGhEM0IsU0FBd0NwSCxHQUMzQyxPQUFPLElBQUlySixTQUFRLENBQUNlLEVBQVNkLEtBQ0ssY0FBMUJvSixFQUFHRyxvQkFJUEgsRUFBR0MsaUJBQWlCLDRCQUE0QixLQUNkLGNBQTFCRCxFQUFHRyxvQkFDSHpJLE9BQVE1QixFQUFVLElBRTFCaUssRUFBNEJDLEdBQUk0QixNQUFLOEYsR0FBVTlRLEVBQU8sSUFBSWdCLE1BQU04UCxPQVA1RGhRLE9BQVE1QixFQU82RCxHQUVqRixDQ3FDZ0I2UixDQUErQjNILEdBQzFCNEIsTUFBSyxLQUNOK0UsRUFBT2lCLG9CQUFvQixHQUU3QixFQUVOYixFQUFRMU8sT0FBZ0IsUUFBSTZPLENBQU8sSUFFaEMsSUFBSSxHQUduQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vZGlzdC9zZXJ2ZXIvc3JjL3JwYy5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL2hhcm1vbnkgbW9kdWxlIGRlY29yYXRvciIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly8vLi9kaXN0L2NvbW1vbi9zcmMvZGVmZXJyZWQuanMiLCJ3ZWJwYWNrOi8vLy4vZGlzdC9jb21tb24vc3JjL3J0Yy1zaWduYWxpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vZGlzdC9kb2NzL3BsdWdpbnMvZ29vZ2xlLWhvbWUvY2FzdC1yZWNlaXZlci9zcmMvY2FzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gc3RhcnRQZXJpb2RpY0dhcmJhZ2VDb2xsZWN0aW9uKCkge1xuICAgIGlmICghZ2xvYmFsLmdjKSB7XG4gICAgICAgIGNvbnNvbGUud2FybigncnBjIHBlZXIgZ2FyYmFnZSBjb2xsZWN0aW9uIG5vdCBhdmFpbGFibGU6IGdsb2JhbC5nYyBpcyBub3QgZXhwb3NlZC4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBjb25zdCBnID0gZ2xvYmFsO1xuICAgICAgICBpZiAoZy5nYykge1xuICAgICAgICAgICAgcmV0dXJuIHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgICAgICBnLmdjKCk7XG4gICAgICAgICAgICB9LCAxMDAwMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICB9XG59XG5jbGFzcyBScGNQcm94eSB7XG4gICAgcGVlcjtcbiAgICBlbnRyeTtcbiAgICBjb25zdHJ1Y3Rvck5hbWU7XG4gICAgcHJveHlQcm9wcztcbiAgICBwcm94eU9uZVdheU1ldGhvZHM7XG4gICAgY29uc3RydWN0b3IocGVlciwgZW50cnksIGNvbnN0cnVjdG9yTmFtZSwgcHJveHlQcm9wcywgcHJveHlPbmVXYXlNZXRob2RzKSB7XG4gICAgICAgIHRoaXMucGVlciA9IHBlZXI7XG4gICAgICAgIHRoaXMuZW50cnkgPSBlbnRyeTtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3Rvck5hbWUgPSBjb25zdHJ1Y3Rvck5hbWU7XG4gICAgICAgIHRoaXMucHJveHlQcm9wcyA9IHByb3h5UHJvcHM7XG4gICAgICAgIHRoaXMucHJveHlPbmVXYXlNZXRob2RzID0gcHJveHlPbmVXYXlNZXRob2RzO1xuICAgIH1cbiAgICB0b1ByaW1pdGl2ZSgpIHtcbiAgICAgICAgY29uc3QgcGVlciA9IHRoaXMucGVlcjtcbiAgICAgICAgcmV0dXJuIGBScGNQcm94eS0ke3BlZXIuc2VsZk5hbWV9OiR7cGVlci5wZWVyTmFtZX06ICR7dGhpcy5jb25zdHJ1Y3Rvck5hbWV9YDtcbiAgICB9XG4gICAgZ2V0KHRhcmdldCwgcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgaWYgKHAgPT09IFJwY1BlZXIuUFJPUEVSVFlfUFJPWFlfSUQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbnRyeS5pZDtcbiAgICAgICAgaWYgKHAgPT09ICdfX3Byb3h5X2NvbnN0cnVjdG9yJylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yTmFtZTtcbiAgICAgICAgaWYgKHAgPT09ICdfX3Byb3h5X3BlZXInKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGVlcjtcbiAgICAgICAgaWYgKHAgPT09IFJwY1BlZXIuUFJPUEVSVFlfUFJPWFlfUFJPUEVSVElFUylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3h5UHJvcHM7XG4gICAgICAgIGlmIChwID09PSBScGNQZWVyLlBST1BFUlRZX1BST1hZX09ORVdBWV9NRVRIT0RTKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJveHlPbmVXYXlNZXRob2RzO1xuICAgICAgICBpZiAocCA9PT0gUnBjUGVlci5QUk9QRVJUWV9KU09OX0RJU0FCTEVfU0VSSUFMSVpBVElPTiB8fCBwID09PSBScGNQZWVyLlBST1BFUlRZX0pTT05fQ09QWV9TRVJJQUxJWkVfQ0hJTERSRU4pXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChwID09PSAndGhlbicpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGlmIChwID09PSAnY29uc3RydWN0b3InKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAodGhpcy5wcm94eVByb3BzPy5bcF0gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3h5UHJvcHM/LltwXTtcbiAgICAgICAgY29uc3QgaGFuZGxlZCA9IFJwY1BlZXIuaGFuZGxlRnVuY3Rpb25JbnZvY2F0aW9ucyh0aGlzLCB0YXJnZXQsIHAsIHJlY2VpdmVyKTtcbiAgICAgICAgaWYgKGhhbmRsZWQpXG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlZDtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm94eSgoKSA9PiBwLCB0aGlzKTtcbiAgICB9XG4gICAgc2V0KHRhcmdldCwgcCwgdmFsdWUsIHJlY2VpdmVyKSB7XG4gICAgICAgIGlmIChwID09PSBScGNQZWVyLmZpbmFsaXplcklkU3ltYm9sKVxuICAgICAgICAgICAgdGhpcy5lbnRyeS5maW5hbGl6ZXJJZCA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgYXBwbHkodGFyZ2V0LCB0aGlzQXJnLCBhcmdBcnJheSkge1xuICAgICAgICBpZiAoT2JqZWN0LmlzRnJvemVuKHRoaXMucGVlci5wZW5kaW5nUmVzdWx0cykpXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFJQQ1Jlc3VsdEVycm9yKHRoaXMucGVlciwgJ1JwY1BlZXIgaGFzIGJlZW4ga2lsbGVkJykpO1xuICAgICAgICAvLyBycGMgb2JqZWN0cyBjYW4gYmUgZnVuY3Rpb25zLiBpZiB0aGUgZnVuY3Rpb24gaXMgYSBvbmV3YXkgbWV0aG9kLFxuICAgICAgICAvLyBpdCB3aWxsIGhhdmUgYSBudWxsIGluIHRoZSBvbmV3YXkgbWV0aG9kIGxpc3QuIHRoaXMgaXMgYmVjYXVzZVxuICAgICAgICAvLyB1bmRlZmluZWQgaXMgbm90IEpTT04gc2VyaWFsaXphYmxlLlxuICAgICAgICBjb25zdCBtZXRob2QgPSB0YXJnZXQoKSB8fCBudWxsO1xuICAgICAgICBjb25zdCBhcmdzID0gW107XG4gICAgICAgIGNvbnN0IHNlcmlhbGl6YXRpb25Db250ZXh0ID0ge307XG4gICAgICAgIGZvciAoY29uc3QgYXJnIG9mIChhcmdBcnJheSB8fCBbXSkpIHtcbiAgICAgICAgICAgIGFyZ3MucHVzaCh0aGlzLnBlZXIuc2VyaWFsaXplKGFyZywgc2VyaWFsaXphdGlvbkNvbnRleHQpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBycGNBcHBseSA9IHtcbiAgICAgICAgICAgIHR5cGU6IFwiYXBwbHlcIixcbiAgICAgICAgICAgIGlkOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBwcm94eUlkOiB0aGlzLmVudHJ5LmlkLFxuICAgICAgICAgICAgYXJncyxcbiAgICAgICAgICAgIG1ldGhvZCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMucHJveHlPbmVXYXlNZXRob2RzPy5pbmNsdWRlcz8uKG1ldGhvZCkpIHtcbiAgICAgICAgICAgIHJwY0FwcGx5Lm9uZXdheSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnBlZXIuc2VuZChycGNBcHBseSwgdW5kZWZpbmVkLCBzZXJpYWxpemF0aW9uQ29udGV4dCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucGVlci5jcmVhdGVQZW5kaW5nUmVzdWx0KChpZCwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBycGNBcHBseS5pZCA9IGlkO1xuICAgICAgICAgICAgdGhpcy5wZWVyLnNlbmQocnBjQXBwbHksIHJlamVjdCwgc2VyaWFsaXphdGlvbkNvbnRleHQpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4vLyB0b2RvOiBlcnJvciBjb25zdHJ1Y3RvciBhZGRzIGEgXCJjYXVzZVwiIHZhcmlhYmxlIGluIENocm9tZSA5MywgTm9kZSB2Pz9cbmV4cG9ydCBjbGFzcyBSUENSZXN1bHRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjYXVzZTtcbiAgICBjb25zdHJ1Y3RvcihwZWVyLCBtZXNzYWdlLCBjYXVzZSwgb3B0aW9ucykge1xuICAgICAgICBzdXBlcihgJHtwZWVyLnNlbGZOYW1lfToke3BlZXIucGVlck5hbWV9OiAke21lc3NhZ2V9YCk7XG4gICAgICAgIHRoaXMuY2F1c2UgPSBjYXVzZTtcbiAgICAgICAgaWYgKG9wdGlvbnM/Lm5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IG9wdGlvbnM/Lm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnM/LnN0YWNrKSB7XG4gICAgICAgICAgICB0aGlzLnN0YWNrID0gYCR7cGVlci5wZWVyTmFtZX06JHtwZWVyLnNlbGZOYW1lfVxcbiR7Y2F1c2U/LnN0YWNrIHx8IG9wdGlvbnMuc3RhY2t9YDtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNvbXBpbGVGdW5jdGlvbihjb2RlLCBwYXJhbXMsIG9wdGlvbnMpIHtcbiAgICBwYXJhbXMgPSBwYXJhbXMgfHwgW107XG4gICAgY29uc3QgZiA9IGAoZnVuY3Rpb24oJHtwYXJhbXMuam9pbignLCcpfSkgezske2NvZGV9O30pYDtcbiAgICByZXR1cm4gZXZhbChmKTtcbn1cbnRyeSB7XG4gICAgY29uc3QgZnIgPSBGaW5hbGl6YXRpb25SZWdpc3RyeTtcbn1cbmNhdGNoIChlKSB7XG4gICAgd2luZG93LldlYWtSZWYgPSBjbGFzcyBXZWFrUmVmIHtcbiAgICAgICAgdGFyZ2V0O1xuICAgICAgICBjb25zdHJ1Y3Rvcih0YXJnZXQpIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICB9XG4gICAgICAgIGRlcmVmKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0O1xuICAgICAgICB9XG4gICAgfTtcbiAgICB3aW5kb3cuRmluYWxpemF0aW9uUmVnaXN0cnkgPSBjbGFzcyBGaW5hbGl6YXRpb25SZWdpc3RyeSB7XG4gICAgICAgIHJlZ2lzdGVyKCkge1xuICAgICAgICB9XG4gICAgfTtcbn1cbmV4cG9ydCBjbGFzcyBScGNQZWVyIHtcbiAgICBzZWxmTmFtZTtcbiAgICBwZWVyTmFtZTtcbiAgICBzZW5kO1xuICAgIGlkQ291bnRlciA9IDE7XG4gICAgcGFyYW1zID0ge307XG4gICAgcGVuZGluZ1Jlc3VsdHMgPSB7fTtcbiAgICBwcm94eUNvdW50ZXIgPSAxO1xuICAgIGxvY2FsUHJveGllZCA9IG5ldyBNYXAoKTtcbiAgICBsb2NhbFByb3h5TWFwID0ge307XG4gICAgcmVtb3RlV2Vha1Byb3hpZXMgPSB7fTtcbiAgICBmaW5hbGl6ZXJzID0gbmV3IEZpbmFsaXphdGlvblJlZ2lzdHJ5KGVudHJ5ID0+IHRoaXMuZmluYWxpemUoZW50cnkpKTtcbiAgICBuYW1lRGVzZXJpYWxpemVyTWFwID0gbmV3IE1hcCgpO1xuICAgIGNvbnN0cnVjdG9yU2VyaWFsaXplck1hcCA9IG5ldyBNYXAoKTtcbiAgICB0cmFuc3BvcnRTYWZlQXJndW1lbnRUeXBlcyA9IFJwY1BlZXIuZ2V0RGVmYXVsdFRyYW5zcG9ydFNhZmVBcmd1bWVudFR5cGVzKCk7XG4gICAga2lsbGVkO1xuICAgIGtpbGxlZERlZmVycmVkO1xuICAgIHN0YXRpYyBmaW5hbGl6ZXJJZFN5bWJvbCA9IFN5bWJvbCgncnBjRmluYWxpemVySWQnKTtcbiAgICBzdGF0aWMgaXNScGNQcm94eSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gISF2YWx1ZT8uW1JwY1BlZXIuUFJPUEVSVFlfUFJPWFlfSURdO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0RGVmYXVsdFRyYW5zcG9ydFNhZmVBcmd1bWVudFR5cGVzKCkge1xuICAgICAgICBjb25zdCBqc29uU2VyaWFsaXphYmxlID0gbmV3IFNldCgpO1xuICAgICAgICBqc29uU2VyaWFsaXphYmxlLmFkZChOdW1iZXIubmFtZSk7XG4gICAgICAgIGpzb25TZXJpYWxpemFibGUuYWRkKFN0cmluZy5uYW1lKTtcbiAgICAgICAganNvblNlcmlhbGl6YWJsZS5hZGQoT2JqZWN0Lm5hbWUpO1xuICAgICAgICBqc29uU2VyaWFsaXphYmxlLmFkZChCb29sZWFuLm5hbWUpO1xuICAgICAgICBqc29uU2VyaWFsaXphYmxlLmFkZChBcnJheS5uYW1lKTtcbiAgICAgICAgcmV0dXJuIGpzb25TZXJpYWxpemFibGU7XG4gICAgfVxuICAgIHN0YXRpYyBoYW5kbGVGdW5jdGlvbkludm9jYXRpb25zKHRoaXosIHRhcmdldCwgcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgaWYgKHAgPT09ICdhcHBseScpIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpc0FyZywgYXJncykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGl6LmFwcGx5KHRhcmdldCwgdGhpeiwgYXJncyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHAgPT09ICdjYWxsJykge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzQXJnLCAuLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXouYXBwbHkodGFyZ2V0LCB0aGl6LCBhcmdzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocCA9PT0gJ3RvU3RyaW5nJyB8fCBwID09PSBTeW1ib2wudG9QcmltaXRpdmUpIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpc0FyZywgLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGl6LnRvUHJpbWl0aXZlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBQUk9QRVJUWV9QUk9YWV9JRCA9ICdfX3Byb3h5X2lkJztcbiAgICBzdGF0aWMgUFJPUEVSVFlfUFJPWFlfT05FV0FZX01FVEhPRFMgPSAnX19wcm94eV9vbmV3YXlfbWV0aG9kcyc7XG4gICAgc3RhdGljIFBST1BFUlRZX0pTT05fRElTQUJMRV9TRVJJQUxJWkFUSU9OID0gJ19fanNvbl9kaXNhYmxlX3NlcmlhbGl6YXRpb24nO1xuICAgIHN0YXRpYyBQUk9QRVJUWV9QUk9YWV9QUk9QRVJUSUVTID0gJ19fcHJveHlfcHJvcHMnO1xuICAgIHN0YXRpYyBQUk9QRVJUWV9KU09OX0NPUFlfU0VSSUFMSVpFX0NISUxEUkVOID0gJ19fanNvbl9jb3B5X3NlcmlhbGl6ZV9jaGlsZHJlbic7XG4gICAgc3RhdGljIFBST0JFRF9QUk9QRVJUSUVTID0gbmV3IFNldChbXG4gICAgICAgICd0aGVuJyxcbiAgICAgICAgJ2NvbnN0cnVjdG9yJyxcbiAgICAgICAgJ19fcHJveHlfaWQnLFxuICAgICAgICAnX19wcm94eV9jb25zdHJ1Y3RvcicsXG4gICAgICAgICdfX3Byb3h5X3BlZXInLFxuICAgICAgICBScGNQZWVyLlBST1BFUlRZX1BST1hZX09ORVdBWV9NRVRIT0RTLFxuICAgICAgICBScGNQZWVyLlBST1BFUlRZX0pTT05fRElTQUJMRV9TRVJJQUxJWkFUSU9OLFxuICAgICAgICBScGNQZWVyLlBST1BFUlRZX1BST1hZX1BST1BFUlRJRVMsXG4gICAgICAgIFJwY1BlZXIuUFJPUEVSVFlfSlNPTl9DT1BZX1NFUklBTElaRV9DSElMRFJFTixcbiAgICBdKTtcbiAgICBjb25zdHJ1Y3RvcihzZWxmTmFtZSwgcGVlck5hbWUsIHNlbmQpIHtcbiAgICAgICAgdGhpcy5zZWxmTmFtZSA9IHNlbGZOYW1lO1xuICAgICAgICB0aGlzLnBlZXJOYW1lID0gcGVlck5hbWU7XG4gICAgICAgIHRoaXMuc2VuZCA9IHNlbmQ7XG4gICAgICAgIHRoaXMua2lsbGVkID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5raWxsZWREZWZlcnJlZCA9IHsgcmVzb2x2ZSwgcmVqZWN0IH07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjcmVhdGVQZW5kaW5nUmVzdWx0KGNiKSB7XG4gICAgICAgIGlmIChPYmplY3QuaXNGcm96ZW4odGhpcy5wZW5kaW5nUmVzdWx0cykpXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFJQQ1Jlc3VsdEVycm9yKHRoaXMsICdScGNQZWVyIGhhcyBiZWVuIGtpbGxlZCcpKTtcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gKHRoaXMuaWRDb3VudGVyKyspLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdSZXN1bHRzW2lkXSA9IHsgcmVzb2x2ZSwgcmVqZWN0IH07XG4gICAgICAgICAgICBjYihpZCwgZSA9PiByZWplY3QobmV3IFJQQ1Jlc3VsdEVycm9yKHRoaXMsIGUubWVzc2FnZSwgZSkpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIHRvZG86IG1ha2UgdGhpcyBhbiBvcHRpb24gc28gcnBjIGRvZXNuJ3QgbnVrZSB0aGUgcHJvY2VzcyBpZiB1bmNhdWdodD9cbiAgICAgICAgcHJvbWlzZS5jYXRjaCgoKSA9PiB7IH0pO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG4gICAga2lsbChtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IFJQQ1Jlc3VsdEVycm9yKHRoaXMsIG1lc3NhZ2UgfHwgJ3BlZXIgd2FzIGtpbGxlZCcpO1xuICAgICAgICB0aGlzLmtpbGxlZERlZmVycmVkLnJlamVjdChlcnJvcik7XG4gICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIE9iamVjdC52YWx1ZXModGhpcy5wZW5kaW5nUmVzdWx0cykpIHtcbiAgICAgICAgICAgIHJlc3VsdC5yZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGVuZGluZ1Jlc3VsdHMgPSBPYmplY3QuZnJlZXplKHt9KTtcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBPYmplY3QuZnJlZXplKHt9KTtcbiAgICAgICAgdGhpcy5yZW1vdGVXZWFrUHJveGllcyA9IE9iamVjdC5mcmVlemUoe30pO1xuICAgICAgICB0aGlzLmxvY2FsUHJveHlNYXAgPSBPYmplY3QuZnJlZXplKHt9KTtcbiAgICAgICAgdGhpcy5sb2NhbFByb3hpZWQuY2xlYXIoKTtcbiAgICB9XG4gICAgLy8gbmVlZCBhIG5hbWUvY29uc3RydWN0b3IgbWFwIGR1ZSB0byBiYWJlbCBuYW1lIG1hbmdsaW5nPyBmaXggc29tZWhvdz9cbiAgICBhZGRTZXJpYWxpemVyKGN0ciwgbmFtZSwgc2VyaWFsaXplcikge1xuICAgICAgICB0aGlzLm5hbWVEZXNlcmlhbGl6ZXJNYXAuc2V0KG5hbWUsIHNlcmlhbGl6ZXIpO1xuICAgICAgICB0aGlzLmNvbnN0cnVjdG9yU2VyaWFsaXplck1hcC5zZXQoY3RyLCBuYW1lKTtcbiAgICB9XG4gICAgZmluYWxpemUoZW50cnkpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMucmVtb3RlV2Vha1Byb3hpZXNbZW50cnkuaWRdO1xuICAgICAgICBjb25zdCBycGNGaW5hbGl6ZSA9IHtcbiAgICAgICAgICAgIF9fbG9jYWxfcHJveHlfaWQ6IGVudHJ5LmlkLFxuICAgICAgICAgICAgX19sb2NhbF9wcm94eV9maW5hbGl6ZXJfaWQ6IGVudHJ5LmZpbmFsaXplcklkLFxuICAgICAgICAgICAgdHlwZTogJ2ZpbmFsaXplJyxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZW5kKHJwY0ZpbmFsaXplKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0UGFyYW0ocGFyYW0pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlUGVuZGluZ1Jlc3VsdCgoaWQsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGFyYW1NZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdwYXJhbScsXG4gICAgICAgICAgICAgICAgcGFyYW0sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zZW5kKHBhcmFtTWVzc2FnZSwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGV2YWxMb2NhbChzY3JpcHQsIGZpbGVuYW1lLCBjb2VyY2VkUGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMucGFyYW1zLCBjb2VyY2VkUGFyYW1zKTtcbiAgICAgICAgbGV0IGNvbXBpbGU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBwcmV2ZW50IGJ1bmRsZXJzIGZyb20gdHJ5aW5nIHRvIGluY2x1ZGUgbm9uLWV4aXN0ZW50IHZtIG1vZHVsZS5cbiAgICAgICAgICAgIGNvbXBpbGUgPSBtb2R1bGVbYHJlcXVpcmVgXSgndm0nKS5jb21waWxlRnVuY3Rpb247XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbXBpbGUgPSBjb21waWxlRnVuY3Rpb247XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZiA9IGNvbXBpbGUoc2NyaXB0LCBPYmplY3Qua2V5cyhwYXJhbXMpLCB7XG4gICAgICAgICAgICBmaWxlbmFtZSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZiguLi5PYmplY3QudmFsdWVzKHBhcmFtcykpO1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGNyZWF0ZUVycm9yUmVzdWx0KHJlc3VsdCwgZSkge1xuICAgICAgICByZXN1bHQuc3RhY2sgPSBlLnN0YWNrIHx8ICdubyBzdGFjayc7XG4gICAgICAgIHJlc3VsdC5yZXN1bHQgPSBlLm5hbWUgfHwgJ25vIG5hbWUnO1xuICAgICAgICByZXN1bHQubWVzc2FnZSA9IGUubWVzc2FnZSB8fCAnbm8gbWVzc2FnZSc7XG4gICAgfVxuICAgIGRlc2VyaWFsaXplKHZhbHVlLCBkZXNlcmlhbGl6YXRpb25Db250ZXh0KSB7XG4gICAgICAgIGlmICghdmFsdWUpXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIGNvbnN0IGNvcHlTZXJpYWxpemVDaGlsZHJlbiA9IHZhbHVlW1JwY1BlZXIuUFJPUEVSVFlfSlNPTl9DT1BZX1NFUklBTElaRV9DSElMRFJFTl07XG4gICAgICAgIGlmIChjb3B5U2VyaWFsaXplQ2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGNvbnN0IHJldCA9IHt9O1xuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHJldFtrZXldID0gdGhpcy5kZXNlcmlhbGl6ZSh2YWwsIGRlc2VyaWFsaXphdGlvbkNvbnRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IF9fcmVtb3RlX3Byb3h5X2lkLCBfX3JlbW90ZV9wcm94eV9maW5hbGl6ZXJfaWQsIF9fbG9jYWxfcHJveHlfaWQsIF9fcmVtb3RlX2NvbnN0cnVjdG9yX25hbWUsIF9fc2VyaWFsaXplZF92YWx1ZSwgX19yZW1vdGVfcHJveHlfcHJvcHMsIF9fcmVtb3RlX3Byb3h5X29uZXdheV9tZXRob2RzIH0gPSB2YWx1ZTtcbiAgICAgICAgaWYgKF9fcmVtb3RlX3Byb3h5X2lkKSB7XG4gICAgICAgICAgICBsZXQgcHJveHkgPSB0aGlzLnJlbW90ZVdlYWtQcm94aWVzW19fcmVtb3RlX3Byb3h5X2lkXT8uZGVyZWYoKTtcbiAgICAgICAgICAgIGlmICghcHJveHkpXG4gICAgICAgICAgICAgICAgcHJveHkgPSB0aGlzLm5ld1Byb3h5KF9fcmVtb3RlX3Byb3h5X2lkLCBfX3JlbW90ZV9jb25zdHJ1Y3Rvcl9uYW1lLCBfX3JlbW90ZV9wcm94eV9wcm9wcywgX19yZW1vdGVfcHJveHlfb25ld2F5X21ldGhvZHMpO1xuICAgICAgICAgICAgcHJveHlbUnBjUGVlci5maW5hbGl6ZXJJZFN5bWJvbF0gPSBfX3JlbW90ZV9wcm94eV9maW5hbGl6ZXJfaWQ7XG4gICAgICAgICAgICByZXR1cm4gcHJveHk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF9fbG9jYWxfcHJveHlfaWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJldCA9IHRoaXMubG9jYWxQcm94eU1hcFtfX2xvY2FsX3Byb3h5X2lkXTtcbiAgICAgICAgICAgIGlmICghcmV0KVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSUENSZXN1bHRFcnJvcih0aGlzLCBgaW52YWxpZCBsb2NhbCBwcm94eSBpZCAke19fbG9jYWxfcHJveHlfaWR9YCk7XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlc2VyaWFsaXplciA9IHRoaXMubmFtZURlc2VyaWFsaXplck1hcC5nZXQoX19yZW1vdGVfY29uc3RydWN0b3JfbmFtZSk7XG4gICAgICAgIGlmIChkZXNlcmlhbGl6ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBkZXNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoX19zZXJpYWxpemVkX3ZhbHVlLCBkZXNlcmlhbGl6YXRpb25Db250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIHNlcmlhbGl6ZSh2YWx1ZSwgc2VyaWFsaXphdGlvbkNvbnRleHQpIHtcbiAgICAgICAgaWYgKHZhbHVlPy5bUnBjUGVlci5QUk9QRVJUWV9KU09OX0NPUFlfU0VSSUFMSVpFX0NISUxEUkVOXSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY29uc3QgcmV0ID0ge307XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbF0gb2YgT2JqZWN0LmVudHJpZXModmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0W2tleV0gPSB0aGlzLnNlcmlhbGl6ZSh2YWwsIHNlcmlhbGl6YXRpb25Db250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF2YWx1ZSB8fCAoIXZhbHVlW1JwY1BlZXIuUFJPUEVSVFlfSlNPTl9ESVNBQkxFX1NFUklBTElaQVRJT05dICYmIHRoaXMudHJhbnNwb3J0U2FmZUFyZ3VtZW50VHlwZXMuaGFzKHZhbHVlLmNvbnN0cnVjdG9yPy5uYW1lKSkpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgX19yZW1vdGVfY29uc3RydWN0b3JfbmFtZSA9IHZhbHVlLl9fcHJveHlfY29uc3RydWN0b3IgfHwgdmFsdWUuY29uc3RydWN0b3I/Lm5hbWU/LnRvU3RyaW5nKCk7XG4gICAgICAgIGxldCBwcm94aWVkRW50cnkgPSB0aGlzLmxvY2FsUHJveGllZC5nZXQodmFsdWUpO1xuICAgICAgICBpZiAocHJveGllZEVudHJ5KSB7XG4gICAgICAgICAgICBjb25zdCBfX3JlbW90ZV9wcm94eV9maW5hbGl6ZXJfaWQgPSAodGhpcy5wcm94eUNvdW50ZXIrKykudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHByb3hpZWRFbnRyeS5maW5hbGl6ZXJJZCA9IF9fcmVtb3RlX3Byb3h5X2ZpbmFsaXplcl9pZDtcbiAgICAgICAgICAgIGNvbnN0IHJldCA9IHtcbiAgICAgICAgICAgICAgICBfX3JlbW90ZV9wcm94eV9pZDogcHJveGllZEVudHJ5LmlkLFxuICAgICAgICAgICAgICAgIF9fcmVtb3RlX3Byb3h5X2ZpbmFsaXplcl9pZCxcbiAgICAgICAgICAgICAgICBfX3JlbW90ZV9jb25zdHJ1Y3Rvcl9uYW1lLFxuICAgICAgICAgICAgICAgIF9fcmVtb3RlX3Byb3h5X3Byb3BzOiB2YWx1ZT8uW1JwY1BlZXIuUFJPUEVSVFlfUFJPWFlfUFJPUEVSVElFU10sXG4gICAgICAgICAgICAgICAgX19yZW1vdGVfcHJveHlfb25ld2F5X21ldGhvZHM6IHZhbHVlPy5bUnBjUGVlci5QUk9QRVJUWV9QUk9YWV9PTkVXQVlfTUVUSE9EU10sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IF9fcHJveHlfaWQsIF9fcHJveHlfcGVlciB9ID0gdmFsdWU7XG4gICAgICAgIGlmIChfX3Byb3h5X2lkICYmIF9fcHJveHlfcGVlciA9PT0gdGhpcykge1xuICAgICAgICAgICAgY29uc3QgcmV0ID0ge1xuICAgICAgICAgICAgICAgIF9fbG9jYWxfcHJveHlfaWQ6IF9fcHJveHlfaWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzZXJpYWxpemVyTWFwTmFtZSA9IHRoaXMuY29uc3RydWN0b3JTZXJpYWxpemVyTWFwLmdldCh2YWx1ZS5jb25zdHJ1Y3Rvcik7XG4gICAgICAgIGlmIChzZXJpYWxpemVyTWFwTmFtZSkge1xuICAgICAgICAgICAgX19yZW1vdGVfY29uc3RydWN0b3JfbmFtZSA9IHNlcmlhbGl6ZXJNYXBOYW1lO1xuICAgICAgICAgICAgY29uc3Qgc2VyaWFsaXplciA9IHRoaXMubmFtZURlc2VyaWFsaXplck1hcC5nZXQoc2VyaWFsaXplck1hcE5hbWUpO1xuICAgICAgICAgICAgaWYgKCFzZXJpYWxpemVyKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignc2VyaWFsaXplciBub3QgZm91bmQgZm9yICcgKyBzZXJpYWxpemVyTWFwTmFtZSk7XG4gICAgICAgICAgICBjb25zdCBzZXJpYWxpemVkID0gc2VyaWFsaXplci5zZXJpYWxpemUodmFsdWUsIHNlcmlhbGl6YXRpb25Db250ZXh0KTtcbiAgICAgICAgICAgIGNvbnN0IHJldCA9IHtcbiAgICAgICAgICAgICAgICBfX3JlbW90ZV9wcm94eV9pZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIF9fcmVtb3RlX3Byb3h5X2ZpbmFsaXplcl9pZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIF9fcmVtb3RlX2NvbnN0cnVjdG9yX25hbWUsXG4gICAgICAgICAgICAgICAgX19yZW1vdGVfcHJveHlfcHJvcHM6IHZhbHVlPy5bUnBjUGVlci5QUk9QRVJUWV9QUk9YWV9QUk9QRVJUSUVTXSxcbiAgICAgICAgICAgICAgICBfX3JlbW90ZV9wcm94eV9vbmV3YXlfbWV0aG9kczogdmFsdWU/LltScGNQZWVyLlBST1BFUlRZX1BST1hZX09ORVdBWV9NRVRIT0RTXSxcbiAgICAgICAgICAgICAgICBfX3NlcmlhbGl6ZWRfdmFsdWU6IHNlcmlhbGl6ZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBfX3JlbW90ZV9wcm94eV9pZCA9ICh0aGlzLnByb3h5Q291bnRlcisrKS50b1N0cmluZygpO1xuICAgICAgICBwcm94aWVkRW50cnkgPSB7XG4gICAgICAgICAgICBpZDogX19yZW1vdGVfcHJveHlfaWQsXG4gICAgICAgICAgICBmaW5hbGl6ZXJJZDogX19yZW1vdGVfcHJveHlfaWQsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubG9jYWxQcm94aWVkLnNldCh2YWx1ZSwgcHJveGllZEVudHJ5KTtcbiAgICAgICAgdGhpcy5sb2NhbFByb3h5TWFwW19fcmVtb3RlX3Byb3h5X2lkXSA9IHZhbHVlO1xuICAgICAgICBjb25zdCByZXQgPSB7XG4gICAgICAgICAgICBfX3JlbW90ZV9wcm94eV9pZCxcbiAgICAgICAgICAgIF9fcmVtb3RlX3Byb3h5X2ZpbmFsaXplcl9pZDogX19yZW1vdGVfcHJveHlfaWQsXG4gICAgICAgICAgICBfX3JlbW90ZV9jb25zdHJ1Y3Rvcl9uYW1lLFxuICAgICAgICAgICAgX19yZW1vdGVfcHJveHlfcHJvcHM6IHZhbHVlPy5bUnBjUGVlci5QUk9QRVJUWV9QUk9YWV9QUk9QRVJUSUVTXSxcbiAgICAgICAgICAgIF9fcmVtb3RlX3Byb3h5X29uZXdheV9tZXRob2RzOiB2YWx1ZT8uW1JwY1BlZXIuUFJPUEVSVFlfUFJPWFlfT05FV0FZX01FVEhPRFNdLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgICBuZXdQcm94eShwcm94eUlkLCBwcm94eUNvbnN0cnVjdG9yTmFtZSwgcHJveHlQcm9wcywgcHJveHlPbmVXYXlNZXRob2RzKSB7XG4gICAgICAgIGNvbnN0IGxvY2FsUHJveGllZEVudHJ5ID0ge1xuICAgICAgICAgICAgaWQ6IHByb3h5SWQsXG4gICAgICAgICAgICBmaW5hbGl6ZXJJZDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBycGMgPSBuZXcgUnBjUHJveHkodGhpcywgbG9jYWxQcm94aWVkRW50cnksIHByb3h5Q29uc3RydWN0b3JOYW1lLCBwcm94eVByb3BzLCBwcm94eU9uZVdheU1ldGhvZHMpO1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBwcm94eUNvbnN0cnVjdG9yTmFtZSA9PT0gJ0Z1bmN0aW9uJyB8fCBwcm94eUNvbnN0cnVjdG9yTmFtZSA9PT0gJ0FzeW5jRnVuY3Rpb24nID8gZnVuY3Rpb24gKCkgeyB9IDogcnBjO1xuICAgICAgICBjb25zdCBwcm94eSA9IG5ldyBQcm94eSh0YXJnZXQsIHJwYyk7XG4gICAgICAgIGNvbnN0IHdlYWtyZWYgPSBuZXcgV2Vha1JlZihwcm94eSk7XG4gICAgICAgIHRoaXMucmVtb3RlV2Vha1Byb3hpZXNbcHJveHlJZF0gPSB3ZWFrcmVmO1xuICAgICAgICB0aGlzLmZpbmFsaXplcnMucmVnaXN0ZXIocnBjLCBsb2NhbFByb3hpZWRFbnRyeSk7XG4gICAgICAgIHJldHVybiBwcm94eTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTWVzc2FnZShtZXNzYWdlLCBkZXNlcmlhbGl6YXRpb25Db250ZXh0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzd2l0Y2ggKG1lc3NhZ2UudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3BhcmFtJzoge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBycGNQYXJhbSA9IG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlcmlhbGl6YXRpb25Db250ZXh0ID0ge307XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyZXN1bHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHJwY1BhcmFtLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiB0aGlzLnNlcmlhbGl6ZSh0aGlzLnBhcmFtc1tycGNQYXJhbS5wYXJhbV0sIHNlcmlhbGl6YXRpb25Db250ZXh0KVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmQocmVzdWx0LCB1bmRlZmluZWQsIHNlcmlhbGl6YXRpb25Db250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ2FwcGx5Jzoge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBycGNBcHBseSA9IG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyZXN1bHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHJwY0FwcGx5LmlkIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXJpYWxpemF0aW9uQ29udGV4dCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpcy5sb2NhbFByb3h5TWFwW3JwY0FwcGx5LnByb3h5SWRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBwcm94eSBpZCAke3JwY0FwcGx5LnByb3h5SWR9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJncyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBhcmcgb2YgKHJwY0FwcGx5LmFyZ3MgfHwgW10pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5wdXNoKHRoaXMuZGVzZXJpYWxpemUoYXJnLCBkZXNlcmlhbGl6YXRpb25Db250ZXh0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocnBjQXBwbHkubWV0aG9kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWV0aG9kID0gdGFyZ2V0W3JwY0FwcGx5Lm1ldGhvZF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtZXRob2QpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgdGFyZ2V0ICR7dGFyZ2V0Py5jb25zdHJ1Y3Rvcj8ubmFtZX0gZG9lcyBub3QgaGF2ZSBtZXRob2QgJHtycGNBcHBseS5tZXRob2R9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBhd2FpdCB0YXJnZXRbcnBjQXBwbHkubWV0aG9kXSguLi5hcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gYXdhaXQgdGFyZ2V0KC4uLmFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnJlc3VsdCA9IHRoaXMuc2VyaWFsaXplKHZhbHVlLCBzZXJpYWxpemF0aW9uQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUuZXJyb3IoJ2ZhaWx1cmUnLCBycGNBcHBseS5tZXRob2QsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVFcnJvclJlc3VsdChyZXN1bHQsIGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghcnBjQXBwbHkub25ld2F5KVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kKHJlc3VsdCwgdW5kZWZpbmVkLCBzZXJpYWxpemF0aW9uQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdyZXN1bHQnOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJwY1Jlc3VsdCA9IG1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZmVycmVkID0gdGhpcy5wZW5kaW5nUmVzdWx0c1tycGNSZXN1bHQuaWRdO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5wZW5kaW5nUmVzdWx0c1tycGNSZXN1bHQuaWRdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWRlZmVycmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGB1bmtub3duIHJlc3VsdCAke3JwY1Jlc3VsdC5pZH1gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJwY1Jlc3VsdC5tZXNzYWdlIHx8IHJwY1Jlc3VsdC5zdGFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBSUENSZXN1bHRFcnJvcih0aGlzLCBycGNSZXN1bHQubWVzc2FnZSB8fCAnbm8gbWVzc2FnZScsIHVuZGVmaW5lZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJwY1Jlc3VsdC5yZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2s6IHJwY1Jlc3VsdC5zdGFjayxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUodGhpcy5kZXNlcmlhbGl6ZShycGNSZXN1bHQucmVzdWx0LCBkZXNlcmlhbGl6YXRpb25Db250ZXh0KSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdmaW5hbGl6ZSc6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcnBjRmluYWxpemUgPSBtZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2NhbCA9IHRoaXMubG9jYWxQcm94eU1hcFtycGNGaW5hbGl6ZS5fX2xvY2FsX3Byb3h5X2lkXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvY2FsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2NhbFByb3hpZWRFbnRyeSA9IHRoaXMubG9jYWxQcm94aWVkLmdldChsb2NhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBhIGZpbmFsaXplciBpZCBpcyBzcGVjaWZpZWQsIGl0IG11c3QgbWF0Y2guXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocnBjRmluYWxpemUuX19sb2NhbF9wcm94eV9maW5hbGl6ZXJfaWQgJiYgcnBjRmluYWxpemUuX19sb2NhbF9wcm94eV9maW5hbGl6ZXJfaWQgIT09IGxvY2FsUHJveGllZEVudHJ5Py5maW5hbGl6ZXJJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMubG9jYWxQcm94eU1hcFtycGNGaW5hbGl6ZS5fX2xvY2FsX3Byb3h5X2lkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxQcm94aWVkLmRlbGV0ZShsb2NhbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgdW5rbm93biBycGMgbWVzc2FnZSB0eXBlICR7bWVzc2FnZS50eXBlfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCd1bmhhbmRsZWQgcnBjIGVycm9yJywgdGhpcy5wZWVyTmFtZSwgZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RXZhbFNvdXJjZSgpIHtcbiAgICByZXR1cm4gYFxuICAgICgoKSA9PiB7XG4gICAgICAgICR7UnBjUHJveHl9XG5cbiAgICAgICAgJHtScGNQZWVyfVxuICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgUnBjUGVlcixcbiAgICAgICAgICAgIFJwY1Byb3h5LFxuICAgICAgICB9O1xuICAgIH0pKCk7XG4gICAgYDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJwYy5qcy5tYXAiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdGlkOiBtb2R1bGVJZCxcblx0XHRsb2FkZWQ6IGZhbHNlLFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcblx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18uaG1kID0gKG1vZHVsZSkgPT4ge1xuXHRtb2R1bGUgPSBPYmplY3QuY3JlYXRlKG1vZHVsZSk7XG5cdGlmICghbW9kdWxlLmNoaWxkcmVuKSBtb2R1bGUuY2hpbGRyZW4gPSBbXTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgJ2V4cG9ydHMnLCB7XG5cdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRzZXQ6ICgpID0+IHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignRVMgTW9kdWxlcyBtYXkgbm90IGFzc2lnbiBtb2R1bGUuZXhwb3J0cyBvciBleHBvcnRzLiosIFVzZSBFU00gZXhwb3J0IHN5bnRheCwgaW5zdGVhZDogJyArIG1vZHVsZS5pZCk7XG5cdFx0fVxuXHR9KTtcblx0cmV0dXJuIG1vZHVsZTtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImV4cG9ydCBjbGFzcyBEZWZlcnJlZCB7XG4gICAgZmluaXNoZWQgPSBmYWxzZTtcbiAgICByZXNvbHZlO1xuICAgIHJlamVjdDtcbiAgICBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICB0aGlzLnJlc29sdmUgPSB2ID0+IHtcbiAgICAgICAgICAgIHRoaXMuZmluaXNoZWQgPSB0cnVlO1xuICAgICAgICAgICAgcmVzb2x2ZSh2KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5yZWplY3QgPSBlID0+IHtcbiAgICAgICAgICAgIHRoaXMuZmluaXNoZWQgPSB0cnVlO1xuICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICB9O1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVmZXJyZWQuanMubWFwIiwiaW1wb3J0IHsgRGVmZXJyZWQgfSBmcm9tIFwiLi9kZWZlcnJlZFwiO1xuZnVuY3Rpb24gZ2V0VXNlckFnZW50KCkge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50O1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgIH1cbn1cbi8vIGNvbm5lY3Rpb25TdGF0ZSBpcyBub3QgaW1wbGVtZW50ZWQgaW4gZmlyZWZveD8gc28gd2F0Y2ggaWNlQ29ubmVjdGlvblN0YXRlIGluc3RlYWQuLi5cbmV4cG9ydCBmdW5jdGlvbiB3YWl0UGVlckNvbm5lY3Rpb25JY2VDb25uZWN0ZWQocGMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBpZiAocGMuaWNlQ29ubmVjdGlvblN0YXRlID09PSAnY29ubmVjdGVkJykge1xuICAgICAgICAgICAgcmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHBjLmFkZEV2ZW50TGlzdGVuZXIoJ2ljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgIGlmIChwYy5pY2VDb25uZWN0aW9uU3RhdGUgPT09ICdjb25uZWN0ZWQnKVxuICAgICAgICAgICAgICAgIHJlc29sdmUodW5kZWZpbmVkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHdhaXRQZWVySWNlQ29ubmVjdGlvbkNsb3NlZChwYykudGhlbihyZWFzb24gPT4gcmVqZWN0KG5ldyBFcnJvcihyZWFzb24pKSk7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gd2FpdFBlZXJJY2VDb25uZWN0aW9uQ2xvc2VkKHBjKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBwYy5hZGRFdmVudExpc3RlbmVyKCdpY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNQZWVyQ29ubmVjdGlvbkNsb3NlZChwYykpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHBjLmljZUNvbm5lY3Rpb25TdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzUGVlckNvbm5lY3Rpb25DbG9zZWQocGMpIHtcbiAgICByZXR1cm4gcGMuaWNlQ29ubmVjdGlvblN0YXRlID09PSAnZGlzY29ubmVjdGVkJ1xuICAgICAgICB8fCBwYy5pY2VDb25uZWN0aW9uU3RhdGUgPT09ICdmYWlsZWQnXG4gICAgICAgIHx8IHBjLmljZUNvbm5lY3Rpb25TdGF0ZSA9PT0gJ2Nsb3NlZCc7XG59XG5mdW5jdGlvbiBzaWxlbmNlKCkge1xuICAgIGxldCBjdHggPSBuZXcgQXVkaW9Db250ZXh0KCksIG9zY2lsbGF0b3IgPSBjdHguY3JlYXRlT3NjaWxsYXRvcigpO1xuICAgIGNvbnN0IGRlc3QgPSBjdHguY3JlYXRlTWVkaWFTdHJlYW1EZXN0aW5hdGlvbigpO1xuICAgIG9zY2lsbGF0b3IuY29ubmVjdChkZXN0KTtcbiAgICBvc2NpbGxhdG9yLnN0YXJ0KCk7XG4gICAgY29uc3QgcmV0ID0gZGVzdC5zdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXTtcbiAgICByZXQuZW5hYmxlZCA9IGZhbHNlO1xuICAgIHJldHVybiByZXQ7XG59XG5leHBvcnQgY2xhc3MgQnJvd3NlclNpZ25hbGluZ1Nlc3Npb24ge1xuICAgIHBjO1xuICAgIHBjRGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcbiAgICBkY0RlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XG4gICAgbWljcm9waG9uZTtcbiAgICBtaWNFbmFibGVkID0gZmFsc2U7XG4gICAgb25QZWVyQ29ubmVjdGlvbjtcbiAgICBvcHRpb25zID0ge1xuICAgICAgICB1c2VyQWdlbnQ6IGdldFVzZXJBZ2VudCgpLFxuICAgICAgICBjYXBhYmlsaXRpZXM6IHtcbiAgICAgICAgICAgIGF1ZGlvOiBSVENSdHBSZWNlaXZlci5nZXRDYXBhYmlsaXRpZXM/LignYXVkaW8nKSB8fCB7XG4gICAgICAgICAgICAgICAgY29kZWNzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgaGVhZGVyRXh0ZW5zaW9uczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZpZGVvOiBSVENSdHBSZWNlaXZlci5nZXRDYXBhYmlsaXRpZXM/LigndmlkZW8nKSB8fCB7XG4gICAgICAgICAgICAgICAgY29kZWNzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgaGVhZGVyRXh0ZW5zaW9uczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgc2NyZWVuOiB7XG4gICAgICAgICAgICB3aWR0aDogc2NyZWVuLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBzY3JlZW4uaGVpZ2h0LFxuICAgICAgICB9LFxuICAgIH07XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgfVxuICAgIGFzeW5jIGdldE9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnM7XG4gICAgfVxuICAgIGFzeW5jIHNldE1pY3JvcGhvbmUoZW5hYmxlZCkge1xuICAgICAgICBpZiAodGhpcy5taWNyb3Bob25lICYmIGVuYWJsZWQgJiYgIXRoaXMubWljRW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5taWNFbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vIGRvaW5nIHNlbmRyZWN2IG9uIHNhZmFyaSByZXF1aXJlcyBhIG1pYyBiZSBhdHRhY2hlZCwgb3IgaXQgZmFpbHMgdG8gY29ubmVjdC5cbiAgICAgICAgICAgIGNvbnN0IG1pYyA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsgdmlkZW86IGZhbHNlLCBhdWRpbzogdHJ1ZSB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubWljcm9waG9uZS5yZXBsYWNlVHJhY2sobWljLmdldFRyYWNrcygpWzBdKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1pY3JvcGhvbmUudHJhY2suZW5hYmxlZCA9IGVuYWJsZWQ7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLnBjRGVmZXJyZWQucHJvbWlzZS50aGVuKHBjID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBwYy5nZXRUcmFuc2NlaXZlcnMoKSB8fCBbXSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHQuc2VuZGVyPy50cmFjaz8uc3RvcD8uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGMuY2xvc2UoKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7IH0pO1xuICAgICAgICB0aGlzLnBjRGVmZXJyZWQucmVqZWN0KG5ldyBFcnJvcignaWNlQ29ubmVjdGlvblN0YXRlICcgKyB0aGlzLnBjPy5pY2VDb25uZWN0aW9uU3RhdGUpKTtcbiAgICB9XG4gICAgYXN5bmMgY3JlYXRlUGVlckNvbm5lY3Rpb24oc2V0dXApIHtcbiAgICAgICAgaWYgKHRoaXMucGMpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGNoZWNrQ29ubiA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpY2VDb25uZWN0aW9uU3RhdGUnLCBwYy5pY2VDb25uZWN0aW9uU3RhdGUpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2Nvbm5lY3Rpb25TdGF0ZScsIHBjLmNvbm5lY3Rpb25TdGF0ZSk7XG4gICAgICAgICAgICBpZiAoaXNQZWVyQ29ubmVjdGlvbkNsb3NlZChwYykpXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBwYyA9IHRoaXMucGMgPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24oc2V0dXAuY29uZmlndXJhdGlvbik7XG4gICAgICAgIHRoaXMucGNEZWZlcnJlZC5yZXNvbHZlKHBjKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblBlZXJDb25uZWN0aW9uPy4ocGMpO1xuICAgICAgICAvLyBwYy5hZGRFdmVudExpc3RlbmVyKCdjb25uZWN0aW9uc3RhdGVjaGFuZ2UnLCBjaGVja0Nvbm4pO1xuICAgICAgICBwYy5hZGRFdmVudExpc3RlbmVyKCdpY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UnLCBjaGVja0Nvbm4pO1xuICAgICAgICAvLyBwYy5hZGRFdmVudExpc3RlbmVyKCdpY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZScsIGV2ID0+IGNvbnNvbGUubG9nKCdpY2VHYXRoZXJpbmdTdGF0ZScsIHBjLmljZUdhdGhlcmluZ1N0YXRlKSlcbiAgICAgICAgLy8gcGMuYWRkRXZlbnRMaXN0ZW5lcignc2lnbmFsaW5nc3RhdGVjaGFuZ2UnLCBldiA9PiBjb25zb2xlLmxvZygnc2lnbmFsaW5nU3RhdGUnLCBwYy5zaWduYWxpbmdTdGF0ZSkpXG4gICAgICAgIC8vIHBjLmFkZEV2ZW50TGlzdGVuZXIoJ2ljZWNhbmRpZGF0ZWVycm9yJywgZXYgPT4gY29uc29sZS5sb2coJ2ljZWNhbmRpZGF0ZWVycm9yJykpXG4gICAgICAgIGlmIChzZXR1cC5kYXRhY2hhbm5lbCkge1xuICAgICAgICAgICAgY29uc3QgZGMgPSBwYy5jcmVhdGVEYXRhQ2hhbm5lbChzZXR1cC5kYXRhY2hhbm5lbC5sYWJlbCwgc2V0dXAuZGF0YWNoYW5uZWwuZGljdCk7XG4gICAgICAgICAgICBkYy5iaW5hcnlUeXBlID0gJ2FycmF5YnVmZmVyJztcbiAgICAgICAgICAgIHRoaXMuZGNEZWZlcnJlZC5yZXNvbHZlKGRjKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2V0dXAuYXVkaW8pIHtcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvID0gcGMuYWRkVHJhbnNjZWl2ZXIoJ2F1ZGlvJywgc2V0dXAuYXVkaW8pO1xuICAgICAgICAgICAgaWYgKHNldHVwLmF1ZGlvLmRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2JyB8fCBzZXR1cC5hdWRpby5kaXJlY3Rpb24gPT09ICdzZW5kb25seScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1pY3JvcGhvbmUgPSBhdWRpby5zZW5kZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNldHVwLnZpZGVvKSB7XG4gICAgICAgICAgICBpZiAoc2V0dXAudmlkZW8uZGlyZWN0aW9uID09PSAnc2VuZHJlY3YnIHx8IHNldHVwLnZpZGVvLmRpcmVjdGlvbiA9PT0gJ3NlbmRvbmx5Jykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRvaW5nIHNlbmRyZWN2IG9uIHNhZmFyaSByZXF1aXJlcyBhIG1pYyBiZSBhdHRhY2hlZCwgb3IgaXQgZmFpbHMgdG8gY29ubmVjdC5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FtZXJhID0gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoeyB2aWRlbzogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0cmFjayBvZiBjYW1lcmEuZ2V0VHJhY2tzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBjLmFkZFRyYWNrKHRyYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyB3aGF0IG5vd1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBjLmFkZFRyYW5zY2VpdmVyKCd2aWRlbycsIHNldHVwLnZpZGVvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBjcmVhdGVMb2NhbERlc2NyaXB0aW9uKHR5cGUsIHNldHVwLCBzZW5kSWNlQ2FuZGlkYXRlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlUGVlckNvbm5lY3Rpb24oc2V0dXApO1xuICAgICAgICBjb25zdCBnYXRoZXJpbmdQcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBjLm9uaWNlY2FuZGlkYXRlID0gZXYgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChldi5jYW5kaWRhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJsb2NhbCBjYW5kaWRhdGVcIiwgZXYuY2FuZGlkYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgc2VuZEljZUNhbmRpZGF0ZT8uKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZXYuY2FuZGlkYXRlKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnBjLm9uaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGMuaWNlR2F0aGVyaW5nU3RhdGUgPT09ICdjb21wbGV0ZScpXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUodW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB0b0Rlc2NyaXB0aW9uID0gKGluaXQpID0+IHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdsb2NhbCBkZXNjcmlwdGlvbicsIGluaXQuc2RwKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogaW5pdC50eXBlLFxuICAgICAgICAgICAgICAgIHNkcDogaW5pdC5zZHAsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBpZiAodHlwZSA9PT0gJ29mZmVyJykge1xuICAgICAgICAgICAgbGV0IG9mZmVyID0gYXdhaXQgdGhpcy5wYy5jcmVhdGVPZmZlcih7XG4gICAgICAgICAgICAgICAgb2ZmZXJUb1JlY2VpdmVBdWRpbzogISFzZXR1cC5hdWRpbyxcbiAgICAgICAgICAgICAgICBvZmZlclRvUmVjZWl2ZVZpZGVvOiAhIXNldHVwLnZpZGVvLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBzZXQgPSB0aGlzLnBjLnNldExvY2FsRGVzY3JpcHRpb24ob2ZmZXIpO1xuICAgICAgICAgICAgaWYgKHNlbmRJY2VDYW5kaWRhdGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvRGVzY3JpcHRpb24ob2ZmZXIpO1xuICAgICAgICAgICAgYXdhaXQgc2V0O1xuICAgICAgICAgICAgYXdhaXQgZ2F0aGVyaW5nUHJvbWlzZTtcbiAgICAgICAgICAgIG9mZmVyID0gYXdhaXQgdGhpcy5wYy5jcmVhdGVPZmZlcih7XG4gICAgICAgICAgICAgICAgb2ZmZXJUb1JlY2VpdmVBdWRpbzogISFzZXR1cC5hdWRpbyxcbiAgICAgICAgICAgICAgICBvZmZlclRvUmVjZWl2ZVZpZGVvOiAhIXNldHVwLnZpZGVvLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdG9EZXNjcmlwdGlvbihvZmZlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgYW5zd2VyID0gYXdhaXQgdGhpcy5wYy5jcmVhdGVBbnN3ZXIoKTtcbiAgICAgICAgICAgIGNvbnN0IHNldCA9IHRoaXMucGMuc2V0TG9jYWxEZXNjcmlwdGlvbihhbnN3ZXIpO1xuICAgICAgICAgICAgaWYgKHNlbmRJY2VDYW5kaWRhdGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvRGVzY3JpcHRpb24oYW5zd2VyKTtcbiAgICAgICAgICAgIGF3YWl0IHNldDtcbiAgICAgICAgICAgIGF3YWl0IGdhdGhlcmluZ1Byb21pc2U7XG4gICAgICAgICAgICBhbnN3ZXIgPSB0aGlzLnBjLmN1cnJlbnRMb2NhbERlc2NyaXB0aW9uIHx8IGFuc3dlcjtcbiAgICAgICAgICAgIHJldHVybiB0b0Rlc2NyaXB0aW9uKGFuc3dlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc2V0UmVtb3RlRGVzY3JpcHRpb24oZGVzY3JpcHRpb24sIHNldHVwKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlUGVlckNvbm5lY3Rpb24oc2V0dXApO1xuICAgICAgICBhd2FpdCB0aGlzLnBjLnNldFJlbW90ZURlc2NyaXB0aW9uKGRlc2NyaXB0aW9uKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3JlbW90ZSBkZXNjcmlwdGlvbicsIGRlc2NyaXB0aW9uLnNkcCk7XG4gICAgfVxuICAgIGFzeW5jIGFkZEljZUNhbmRpZGF0ZShjYW5kaWRhdGUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYy5hZGRJY2VDYW5kaWRhdGUoY2FuZGlkYXRlKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJyZW1vdGUgY2FuZGlkYXRlXCIsIGNhbmRpZGF0ZSk7XG4gICAgfVxuICAgIGFzeW5jIGVuZFNlc3Npb24oKSB7XG4gICAgfVxufVxuZnVuY3Rpb24gbG9nU2VuZENhbmRpZGF0ZShjb25zb2xlLCB0eXBlLCBzZXNzaW9uKSB7XG4gICAgcmV0dXJuIGFzeW5jIChjYW5kaWRhdGUpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGAke3R5cGV9IHRyaWNrbGVkIGNhbmRpZGF0ZTpgLCBjYW5kaWRhdGUuc2RwTUxpbmVJbmRleCwgY2FuZGlkYXRlLmNhbmRpZGF0ZSk7XG4gICAgICAgICAgICBhd2FpdCBzZXNzaW9uLmFkZEljZUNhbmRpZGF0ZShjYW5kaWRhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdhZGRJY2VDYW5kaWRhdGUgZXJyb3InLCBlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlQ2FuZGlkYXRlUXVldWUoY29uc29sZSwgdHlwZSwgc2Vzc2lvbikge1xuICAgIGxldCByZWFkeSA9IGZhbHNlO1xuICAgIGxldCBjYW5kaWRhdGVRdWV1ZSA9IFtdO1xuICAgIGNvbnN0IGxzID0gbG9nU2VuZENhbmRpZGF0ZShjb25zb2xlLCB0eXBlLCBzZXNzaW9uKTtcbiAgICBjb25zdCBxdWV1ZVNlbmRDYW5kaWRhdGUgPSBhc3luYyAoY2FuZGlkYXRlKSA9PiB7XG4gICAgICAgIGlmICghcmVhZHkpXG4gICAgICAgICAgICBjYW5kaWRhdGVRdWV1ZS5wdXNoKGNhbmRpZGF0ZSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGxzKGNhbmRpZGF0ZSk7XG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICBmbHVzaCgpIHtcbiAgICAgICAgICAgIHJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgY2FuZGlkYXRlIG9mIGNhbmRpZGF0ZVF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgbHMoY2FuZGlkYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbmRpZGF0ZVF1ZXVlID0gW107XG4gICAgICAgIH0sXG4gICAgICAgIHF1ZXVlU2VuZENhbmRpZGF0ZSxcbiAgICB9O1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbm5lY3RSVENTaWduYWxpbmdDbGllbnRzKGNvbnNvbGUsIG9mZmVyQ2xpZW50LCBvZmZlclNldHVwLCBhbnN3ZXJDbGllbnQsIGFuc3dlclNldHVwKSB7XG4gICAgY29uc3Qgb2ZmZXJPcHRpb25zID0gYXdhaXQgb2ZmZXJDbGllbnQuZ2V0T3B0aW9ucygpO1xuICAgIGNvbnN0IGFuc3dlck9wdGlvbnMgPSBhd2FpdCBhbnN3ZXJDbGllbnQuZ2V0T3B0aW9ucygpO1xuICAgIGNvbnN0IGRpc2FibGVUcmlja2xlID0gb2ZmZXJPcHRpb25zPy5kaXNhYmxlVHJpY2tsZSB8fCBhbnN3ZXJPcHRpb25zPy5kaXNhYmxlVHJpY2tsZTtcbiAgICBpZiAob2ZmZXJPcHRpb25zPy5vZmZlciAmJiBhbnN3ZXJPcHRpb25zPy5vZmZlcilcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdCb3RoIFJUQyBjbGllbnRzIGhhdmUgb2ZmZXJzIGFuZCBjYW4gbm90IG5lZ290aWF0ZS4gQ29uc2lkZXIgaW1wbGVtZW50aW5nIHRoaXMgaW4gQHNjcnlwdGVkL3dlYnJ0Yy4nKTtcbiAgICBpZiAob2ZmZXJPcHRpb25zPy5yZXF1aXJlc09mZmVyICYmIGFuc3dlck9wdGlvbnMucmVxdWlyZXNPZmZlcilcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdCb3RoIFJUQyBjbGllbnRzIHJlcXVpcmUgb2ZmZXJzIGFuZCBjYW4gbm90IG5lZ290aWF0ZS4nKTtcbiAgICBvZmZlclNldHVwLnR5cGUgPSAnb2ZmZXInO1xuICAgIGFuc3dlclNldHVwLnR5cGUgPSAnYW5zd2VyJztcbiAgICBjb25zdCBhbnN3ZXJRdWV1ZSA9IGNyZWF0ZUNhbmRpZGF0ZVF1ZXVlKGNvbnNvbGUsICdvZmZlcicsIGFuc3dlckNsaWVudCk7XG4gICAgY29uc3Qgb2ZmZXJRdWV1ZSA9IGNyZWF0ZUNhbmRpZGF0ZVF1ZXVlKGNvbnNvbGUsICdhbnN3ZXInLCBvZmZlckNsaWVudCk7XG4gICAgY29uc3Qgb2ZmZXIgPSBhd2FpdCBvZmZlckNsaWVudC5jcmVhdGVMb2NhbERlc2NyaXB0aW9uKCdvZmZlcicsIG9mZmVyU2V0dXAsIGRpc2FibGVUcmlja2xlID8gdW5kZWZpbmVkIDogYW5zd2VyUXVldWUucXVldWVTZW5kQ2FuZGlkYXRlKTtcbiAgICBjb25zb2xlLmxvZygnb2ZmZXIgc2RwJywgb2ZmZXIuc2RwKTtcbiAgICBhd2FpdCBhbnN3ZXJDbGllbnQuc2V0UmVtb3RlRGVzY3JpcHRpb24ob2ZmZXIsIGFuc3dlclNldHVwKTtcbiAgICBhbnN3ZXJRdWV1ZS5mbHVzaCgpO1xuICAgIGNvbnN0IGFuc3dlciA9IGF3YWl0IGFuc3dlckNsaWVudC5jcmVhdGVMb2NhbERlc2NyaXB0aW9uKCdhbnN3ZXInLCBhbnN3ZXJTZXR1cCwgZGlzYWJsZVRyaWNrbGUgPyB1bmRlZmluZWQgOiBvZmZlclF1ZXVlLnF1ZXVlU2VuZENhbmRpZGF0ZSk7XG4gICAgY29uc29sZS5sb2coJ2Fuc3dlciBzZHAnLCBhbnN3ZXIuc2RwKTtcbiAgICBhd2FpdCBvZmZlckNsaWVudC5zZXRSZW1vdGVEZXNjcmlwdGlvbihhbnN3ZXIsIG9mZmVyU2V0dXApO1xuICAgIG9mZmVyUXVldWUuZmx1c2goKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ0Yy1zaWduYWxpbmcuanMubWFwIiwiaW1wb3J0IHsgUnBjUGVlciB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL3NlcnZlci9zcmMvcnBjJztcbmltcG9ydCB7IEJyb3dzZXJTaWduYWxpbmdTZXNzaW9uLCB3YWl0UGVlckNvbm5lY3Rpb25JY2VDb25uZWN0ZWQsIHdhaXRQZWVySWNlQ29ubmVjdGlvbkNsb3NlZCB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL2NvbW1vbi9zcmMvcnRjLXNpZ25hbGluZyc7XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBjb25zdCBvcHRpb25zID0gbmV3IGNhc3QuZnJhbWV3b3JrLkNhc3RSZWNlaXZlck9wdGlvbnMoKTtcbiAgICBvcHRpb25zLmRpc2FibGVJZGxlVGltZW91dCA9IHRydWU7XG4gICAgY2FzdC5mcmFtZXdvcmsuQ2FzdFJlY2VpdmVyQ29udGV4dC5nZXRJbnN0YW5jZSgpLnN0YXJ0KG9wdGlvbnMpO1xuICAgIGNvbnN0IGNvbnRleHQgPSBjYXN0LmZyYW1ld29yay5DYXN0UmVjZWl2ZXJDb250ZXh0LmdldEluc3RhbmNlKCk7XG4gICAgY29uc3QgcGxheWVyTWFuYWdlciA9IGNvbnRleHQuZ2V0UGxheWVyTWFuYWdlcigpO1xuICAgIGNvbnN0IHZpZGVvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lZGlhJyk7XG4gICAgbGV0IHByZXZpb3VzQ2xlYW51cDtcbiAgICAvLyBpbnRlcmNlcHQgdGhlIExPQUQgcmVxdWVzdCB0byBiZSBhYmxlIHRvIHJlYWQgaW4gYSBjb250ZW50SWQgYW5kIGdldCBkYXRhXG4gICAgY29uc3QgaW50ZXJjZXB0b3IgPSAobG9hZFJlcXVlc3REYXRhKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGxvYWRSZXF1ZXN0RGF0YSk7XG4gICAgICAgIGNvbnN0IGVpb1VybCA9IGxvYWRSZXF1ZXN0RGF0YS5tZWRpYS5lbnRpdHkgfHwgbG9hZFJlcXVlc3REYXRhLm1lZGlhLmNvbnRlbnRJZDtcbiAgICAgICAgY29uc3QgdG9rZW4gPSBsb2FkUmVxdWVzdERhdGEuY3JlZGVudGlhbHMgPz8gbG9hZFJlcXVlc3REYXRhLm1lZGlhLmN1c3RvbURhdGEudG9rZW47XG4gICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoZWlvVXJsKTtcbiAgICAgICAgY29uc3QgZW5kcG9pbnRQYXRoID0gdXJsLnBhdGhuYW1lO1xuICAgICAgICBjb25zdCBxdWVyeSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBuZXcgVVJMU2VhcmNoUGFyYW1zKHVybC5zZWFyY2gpKSB7XG4gICAgICAgICAgICBxdWVyeVtrXSA9IHY7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHBhdGg6IGVuZHBvaW50UGF0aCxcbiAgICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzb2NrZXQgPSBlaW8oYHdzczovLyR7dXJsLmhvc3R9YCwgb3B0aW9ucyk7XG4gICAgICAgIHNvY2tldC5vbignb3BlbicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICB0b2tlbixcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IHJwY1BlZXIgPSBuZXcgUnBjUGVlcignY2FzdC1yZWNlaXZlcicsICdob3N0JywgKG1lc3NhZ2UsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0Py4oZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzb2NrZXQub24oJ21lc3NhZ2UnLCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIHJwY1BlZXIuaGFuZGxlTWVzc2FnZShKU09OLnBhcnNlKGRhdGEpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IG5ldyBCcm93c2VyU2lnbmFsaW5nU2Vzc2lvbigpO1xuICAgICAgICAgICAgY29uc3QgY2xlYW51cCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY2xlYW51cCcpO1xuICAgICAgICAgICAgICAgIHNvY2tldC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIHNlc3Npb24ucGNEZWZlcnJlZC5wcm9taXNlLnRoZW4ocGMgPT4gcGMuY2xvc2UoKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcHJldmlvdXNDbGVhbnVwPy4oKTtcbiAgICAgICAgICAgIHByZXZpb3VzQ2xlYW51cCA9IGNsZWFudXA7XG4gICAgICAgICAgICBzb2NrZXQub24oJ2Nsb3NlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzb2NrZXQgaW8gY29ubmVjdGlvbiBjbG9zZSBldmVudCcpO1xuICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2Vzc2lvbi5vblBlZXJDb25uZWN0aW9uID0gYXN5bmMgKHBjKSA9PiB7XG4gICAgICAgICAgICAgICAgd2FpdFBlZXJJY2VDb25uZWN0aW9uQ2xvc2VkKHBjKS50aGVuKGNsZWFudXApO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lZGlhU3RyZWFtID0gbmV3IE1lZGlhU3RyZWFtKHBjLmdldFJlY2VpdmVycygpLm1hcCgocmVjZWl2ZXIpID0+IHJlY2VpdmVyLnRyYWNrKSk7XG4gICAgICAgICAgICAgICAgcGMub250cmFjayA9IGUgPT4gbWVkaWFTdHJlYW0uYWRkVHJhY2soZS50cmFjayk7XG4gICAgICAgICAgICAgICAgdmlkZW8uc3JjT2JqZWN0ID0gbWVkaWFTdHJlYW07XG4gICAgICAgICAgICAgICAgd2FpdFBlZXJDb25uZWN0aW9uSWNlQ29ubmVjdGVkKHBjKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNvY2tldC5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gc29ja2V0LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcnBjUGVlci5wYXJhbXNbJ3Nlc3Npb24nXSA9IHNlc3Npb247XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIHBsYXllck1hbmFnZXIuc2V0TWVzc2FnZUludGVyY2VwdG9yKGNhc3QuZnJhbWV3b3JrLm1lc3NhZ2VzLk1lc3NhZ2VUeXBlLkxPQUQsIGludGVyY2VwdG9yKTtcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FzdC5qcy5tYXAiXSwibmFtZXMiOlsic3RhcnRQZXJpb2RpY0dhcmJhZ2VDb2xsZWN0aW9uIiwiZyIsImdjIiwic2V0SW50ZXJ2YWwiLCJlIiwiY29uc29sZSIsIndhcm4iLCJScGNQcm94eSIsInBlZXIiLCJlbnRyeSIsImNvbnN0cnVjdG9yTmFtZSIsInByb3h5UHJvcHMiLCJwcm94eU9uZVdheU1ldGhvZHMiLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJ0b1ByaW1pdGl2ZSIsInNlbGZOYW1lIiwicGVlck5hbWUiLCJnZXQiLCJ0YXJnZXQiLCJwIiwicmVjZWl2ZXIiLCJScGNQZWVyIiwiUFJPUEVSVFlfUFJPWFlfSUQiLCJpZCIsIlBST1BFUlRZX1BST1hZX1BST1BFUlRJRVMiLCJQUk9QRVJUWV9QUk9YWV9PTkVXQVlfTUVUSE9EUyIsIlBST1BFUlRZX0pTT05fRElTQUJMRV9TRVJJQUxJWkFUSU9OIiwiUFJPUEVSVFlfSlNPTl9DT1BZX1NFUklBTElaRV9DSElMRFJFTiIsInVuZGVmaW5lZCIsImhhbmRsZUZ1bmN0aW9uSW52b2NhdGlvbnMiLCJQcm94eSIsInNldCIsInZhbHVlIiwiZmluYWxpemVySWRTeW1ib2wiLCJmaW5hbGl6ZXJJZCIsImFwcGx5IiwidGhpc0FyZyIsImFyZ0FycmF5IiwiT2JqZWN0IiwiaXNGcm96ZW4iLCJwZW5kaW5nUmVzdWx0cyIsIlByb21pc2UiLCJyZWplY3QiLCJSUENSZXN1bHRFcnJvciIsIm1ldGhvZCIsImFyZ3MiLCJzZXJpYWxpemF0aW9uQ29udGV4dCIsImFyZyIsInB1c2giLCJzZXJpYWxpemUiLCJycGNBcHBseSIsInR5cGUiLCJwcm94eUlkIiwiaW5jbHVkZXMiLCJvbmV3YXkiLCJzZW5kIiwicmVzb2x2ZSIsImNyZWF0ZVBlbmRpbmdSZXN1bHQiLCJFcnJvciIsImNhdXNlIiwibWVzc2FnZSIsIm9wdGlvbnMiLCJzdXBlciIsIm5hbWUiLCJzdGFjayIsImNvbXBpbGVGdW5jdGlvbiIsImNvZGUiLCJwYXJhbXMiLCJmIiwiam9pbiIsImV2YWwiLCJmciIsIkZpbmFsaXphdGlvblJlZ2lzdHJ5Iiwid2luZG93IiwiV2Vha1JlZiIsImRlcmVmIiwicmVnaXN0ZXIiLCJpZENvdW50ZXIiLCJwcm94eUNvdW50ZXIiLCJsb2NhbFByb3hpZWQiLCJNYXAiLCJsb2NhbFByb3h5TWFwIiwicmVtb3RlV2Vha1Byb3hpZXMiLCJmaW5hbGl6ZXJzIiwiZmluYWxpemUiLCJuYW1lRGVzZXJpYWxpemVyTWFwIiwiY29uc3RydWN0b3JTZXJpYWxpemVyTWFwIiwidHJhbnNwb3J0U2FmZUFyZ3VtZW50VHlwZXMiLCJnZXREZWZhdWx0VHJhbnNwb3J0U2FmZUFyZ3VtZW50VHlwZXMiLCJraWxsZWQiLCJraWxsZWREZWZlcnJlZCIsInN0YXRpYyIsIlN5bWJvbCIsImpzb25TZXJpYWxpemFibGUiLCJTZXQiLCJhZGQiLCJOdW1iZXIiLCJTdHJpbmciLCJCb29sZWFuIiwiQXJyYXkiLCJ0aGl6IiwiY2IiLCJwcm9taXNlIiwidG9TdHJpbmciLCJjYXRjaCIsImtpbGwiLCJlcnJvciIsInJlc3VsdCIsInZhbHVlcyIsImZyZWV6ZSIsImNsZWFyIiwiYWRkU2VyaWFsaXplciIsImN0ciIsInNlcmlhbGl6ZXIiLCJycGNGaW5hbGl6ZSIsIl9fbG9jYWxfcHJveHlfaWQiLCJfX2xvY2FsX3Byb3h5X2ZpbmFsaXplcl9pZCIsImFzeW5jIiwicGFyYW0iLCJwYXJhbU1lc3NhZ2UiLCJldmFsTG9jYWwiLCJzY3JpcHQiLCJmaWxlbmFtZSIsImNvZXJjZWRQYXJhbXMiLCJhc3NpZ24iLCJjb21waWxlIiwibW9kdWxlIiwia2V5cyIsImNyZWF0ZUVycm9yUmVzdWx0IiwiZGVzZXJpYWxpemUiLCJkZXNlcmlhbGl6YXRpb25Db250ZXh0IiwicmV0Iiwia2V5IiwidmFsIiwiZW50cmllcyIsIl9fcmVtb3RlX3Byb3h5X2lkIiwiX19yZW1vdGVfcHJveHlfZmluYWxpemVyX2lkIiwiX19yZW1vdGVfY29uc3RydWN0b3JfbmFtZSIsIl9fc2VyaWFsaXplZF92YWx1ZSIsIl9fcmVtb3RlX3Byb3h5X3Byb3BzIiwiX19yZW1vdGVfcHJveHlfb25ld2F5X21ldGhvZHMiLCJwcm94eSIsIm5ld1Byb3h5IiwiZGVzZXJpYWxpemVyIiwiaGFzIiwiX19wcm94eV9jb25zdHJ1Y3RvciIsInByb3hpZWRFbnRyeSIsIl9fcHJveHlfaWQiLCJfX3Byb3h5X3BlZXIiLCJzZXJpYWxpemVyTWFwTmFtZSIsInNlcmlhbGl6ZWQiLCJwcm94eUNvbnN0cnVjdG9yTmFtZSIsImxvY2FsUHJveGllZEVudHJ5IiwicnBjIiwid2Vha3JlZiIsInJwY1BhcmFtIiwicnBjUmVzdWx0IiwiZGVmZXJyZWQiLCJsb2NhbCIsImRlbGV0ZSIsImdldEV2YWxTb3VyY2UiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJleHBvcnRzIiwibG9hZGVkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImQiLCJkZWZpbml0aW9uIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdsb2JhbFRoaXMiLCJGdW5jdGlvbiIsImhtZCIsImNyZWF0ZSIsImNoaWxkcmVuIiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIkRlZmVycmVkIiwiZmluaXNoZWQiLCJ2IiwiZ2V0VXNlckFnZW50IiwibmF2aWdhdG9yIiwidXNlckFnZW50Iiwid2FpdFBlZXJJY2VDb25uZWN0aW9uQ2xvc2VkIiwicGMiLCJhZGRFdmVudExpc3RlbmVyIiwiaXNQZWVyQ29ubmVjdGlvbkNsb3NlZCIsImljZUNvbm5lY3Rpb25TdGF0ZSIsIkJyb3dzZXJTaWduYWxpbmdTZXNzaW9uIiwicGNEZWZlcnJlZCIsImRjRGVmZXJyZWQiLCJtaWNyb3Bob25lIiwibWljRW5hYmxlZCIsIm9uUGVlckNvbm5lY3Rpb24iLCJjYXBhYmlsaXRpZXMiLCJhdWRpbyIsIlJUQ1J0cFJlY2VpdmVyIiwiZ2V0Q2FwYWJpbGl0aWVzIiwiY29kZWNzIiwiaGVhZGVyRXh0ZW5zaW9ucyIsInZpZGVvIiwic2NyZWVuIiwid2lkdGgiLCJoZWlnaHQiLCJlbmFibGVkIiwibWljIiwibWVkaWFEZXZpY2VzIiwiZ2V0VXNlck1lZGlhIiwicmVwbGFjZVRyYWNrIiwiZ2V0VHJhY2tzIiwidHJhY2siLCJjbG9zZSIsInRoZW4iLCJ0IiwiZ2V0VHJhbnNjZWl2ZXJzIiwic2VuZGVyIiwic3RvcCIsInNldHVwIiwiUlRDUGVlckNvbm5lY3Rpb24iLCJjb25maWd1cmF0aW9uIiwibG9nIiwiY29ubmVjdGlvblN0YXRlIiwiZGF0YWNoYW5uZWwiLCJkYyIsImNyZWF0ZURhdGFDaGFubmVsIiwibGFiZWwiLCJkaWN0IiwiYmluYXJ5VHlwZSIsImFkZFRyYW5zY2VpdmVyIiwiZGlyZWN0aW9uIiwiY2FtZXJhIiwiYWRkVHJhY2siLCJzZW5kSWNlQ2FuZGlkYXRlIiwiY3JlYXRlUGVlckNvbm5lY3Rpb24iLCJnYXRoZXJpbmdQcm9taXNlIiwib25pY2VjYW5kaWRhdGUiLCJldiIsImNhbmRpZGF0ZSIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsIm9uaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2UiLCJpY2VHYXRoZXJpbmdTdGF0ZSIsInRvRGVzY3JpcHRpb24iLCJpbml0Iiwic2RwIiwib2ZmZXIiLCJjcmVhdGVPZmZlciIsIm9mZmVyVG9SZWNlaXZlQXVkaW8iLCJvZmZlclRvUmVjZWl2ZVZpZGVvIiwic2V0TG9jYWxEZXNjcmlwdGlvbiIsImFuc3dlciIsImNyZWF0ZUFuc3dlciIsImN1cnJlbnRMb2NhbERlc2NyaXB0aW9uIiwiZGVzY3JpcHRpb24iLCJzZXRSZW1vdGVEZXNjcmlwdGlvbiIsImFkZEljZUNhbmRpZGF0ZSIsImRvY3VtZW50IiwiZXZlbnQiLCJjYXN0IiwiZnJhbWV3b3JrIiwiQ2FzdFJlY2VpdmVyT3B0aW9ucyIsImRpc2FibGVJZGxlVGltZW91dCIsIkNhc3RSZWNlaXZlckNvbnRleHQiLCJnZXRJbnN0YW5jZSIsInN0YXJ0IiwicGxheWVyTWFuYWdlciIsImdldFBsYXllck1hbmFnZXIiLCJnZXRFbGVtZW50QnlJZCIsInByZXZpb3VzQ2xlYW51cCIsInNldE1lc3NhZ2VJbnRlcmNlcHRvciIsIm1lc3NhZ2VzIiwiTWVzc2FnZVR5cGUiLCJMT0FEIiwibG9hZFJlcXVlc3REYXRhIiwiZWlvVXJsIiwibWVkaWEiLCJlbnRpdHkiLCJjb250ZW50SWQiLCJ0b2tlbiIsImNyZWRlbnRpYWxzIiwiY3VzdG9tRGF0YSIsInVybCIsIlVSTCIsImVuZHBvaW50UGF0aCIsInBhdGhuYW1lIiwicXVlcnkiLCJrIiwiVVJMU2VhcmNoUGFyYW1zIiwic2VhcmNoIiwicGF0aCIsInNvY2tldCIsImVpbyIsImhvc3QiLCJvbiIsInJwY1BlZXIiLCJkYXRhIiwiaGFuZGxlTWVzc2FnZSIsInNlc3Npb24iLCJjbGVhbnVwIiwibWVkaWFTdHJlYW0iLCJNZWRpYVN0cmVhbSIsImdldFJlY2VpdmVycyIsIm1hcCIsIm9udHJhY2siLCJzcmNPYmplY3QiLCJyZWFzb24iLCJ3YWl0UGVlckNvbm5lY3Rpb25JY2VDb25uZWN0ZWQiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiXSwic291cmNlUm9vdCI6IiJ9